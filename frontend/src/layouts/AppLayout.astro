---
type NavItem = {
  href: string;
  label: string;
  icon: 'text' | 'link' | 'db' | 'settings';
};

const { title = 'Polyglot AI Studio & API' } = Astro.props;
const path = Astro.url.pathname;

const nav: NavItem[] = [
  { href: '/text', label: 'Translate Text', icon: 'text' },
  { href: '/article', label: 'Translate Article', icon: 'link' },
  { href: '/batch', label: 'Batch Jobs', icon: 'db' },
];

const icons: Record<NavItem['icon'], string> = {
  text: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 5h16M9 5v14m6-14v14M6 19h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
  link: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 1 0-7l1-1a5 5 0 0 1 7 7l-1 1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M14 11a5 5 0 0 1 0 7l-1 1a5 5 0 0 1-7-7l1-1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
  db: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3c4.418 0 8 1.343 8 3s-3.582 3-8 3-8-1.343-8-3 3.582-3 8-3Z" stroke="currentColor" stroke-width="2"/><path d="M4 6v6c0 1.657 3.582 3 8 3s8-1.343 8-3V6" stroke="currentColor" stroke-width="2"/><path d="M4 12v6c0 1.657 3.582 3 8 3s8-1.343 8-3v-6" stroke="currentColor" stroke-width="2"/></svg>',
  settings: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" stroke-width="2"/><path d="M19.4 15a7.97 7.97 0 0 0 .1-6l2-1.1-2-3.4-2.3 1a8.2 8.2 0 0 0-5.2-3l-.4-2.5H10l-.4 2.5a8.2 8.2 0 0 0-5.2 3l-2.3-1-2 3.4 2 1.1a7.97 7.97 0 0 0 .1 6l-2 1.1 2 3.4 2.3-1a8.2 8.2 0 0 0 5.2 3l.4 2.5h4l.4-2.5a8.2 8.2 0 0 0 5.2-3l2.3 1 2-3.4-2-1.1Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>'
};

const iconSvg = (name: NavItem['icon']): string => icons[name];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <style is:global>
      :root {
        color-scheme: light;
        /* Sidebar */
        --sb-bg: #0b1220;
        --sb-bg-2: #060b16;
        --sb-text: #e7eefc;
        --sb-muted: rgba(231, 238, 252, 0.7);
        --sb-border: rgba(255, 255, 255, 0.08);
        --sb-active: rgba(59, 130, 246, 0.18);

        /* Main (light) */
        --main-bg: #f6f8fc;
        --main-surface: #ffffff;
        --main-text: #0f172a;
        --main-muted: rgba(15, 23, 42, 0.6);
        --main-border: rgba(15, 23, 42, 0.10);

        /* Accents */
        --primary: #3b82f6;
        --primary-soft: rgba(59, 130, 246, 0.14);
        --success-bg: #dcfce7;
        --success-text: #166534;
        --success-border: #bbf7d0;
        --danger-border: rgba(220, 38, 38, 0.20);
        --danger-bg: rgba(220, 38, 38, 0.06);
      }
      body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background: var(--main-bg); color: var(--main-text); }
      .shell { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; }
      aside { background: linear-gradient(180deg, var(--sb-bg), var(--sb-bg-2)); color: var(--sb-text); border-right: 1px solid rgba(255,255,255,.06); }
      .brand { display: flex; align-items: center; gap: 10px; padding: 18px 16px 10px; }
      .brand-badge { width: 34px; height: 34px; border-radius: 10px; background: rgba(59,130,246,.18); display: grid; place-items: center; border: 1px solid rgba(59,130,246,.3); }
      .brand-title { font-weight: 700; font-size: 13px; line-height: 1.1; }
      .brand-sub { font-size: 12px; color: rgba(231,238,252,.75); }
      nav { padding: 10px 10px 18px; }
      .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; color: rgba(231,238,252,.9); text-decoration: none; border: 1px solid transparent; }
      .nav-item:hover { background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.06); }
      .nav-item.active { background: var(--sb-active); border-color: rgba(59,130,246,.35); color: #fff; }
      .nav-icon { width: 22px; height: 22px; display: grid; place-items: center; color: rgba(231,238,252,.9); }
      .footer { position: sticky; bottom: 0; padding: 12px 10px 14px; border-top: 1px solid rgba(255,255,255,.06); background: rgba(6, 11, 22, 0.8); backdrop-filter: blur(10px); }
      .footer a { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; color: rgba(231,238,252,.9); text-decoration: none; border: 1px solid rgba(255,255,255,.06); background: rgba(255,255,255,.03); }

      header { padding: 18px 22px; display: flex; justify-content: space-between; align-items: center; }
      .page-title { font-size: 20px; font-weight: 750; }
      .status { font-size: 12px; padding: 6px 10px; border-radius: 999px; background: var(--success-bg); color: var(--success-text); border: 1px solid var(--success-border); }
      main { padding: 0 22px 22px; }
      .card { background: var(--main-surface); border: 1px solid var(--main-border); border-radius: 14px; padding: 16px; box-shadow: 0 6px 30px rgba(15,23,42,.06); }
      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      .row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
      label { display: block; font-size: 12px; color: rgba(15, 23, 42, 0.75); margin-bottom: 6px; }
      input, textarea, select { width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(15, 23, 42, 0.12); background: #fff; color: var(--main-text); }
      input::placeholder, textarea::placeholder { color: rgba(15,23,42,.35); }
      textarea { min-height: 280px; resize: vertical; }
      .actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 12px; }
      .btn { padding: 10px 14px; border-radius: 10px; border: 1px solid rgba(37, 99, 235, 0.55); background: #2563eb; color: #ffffff; cursor: pointer; font-weight: 650; }
      .btn:hover { filter: brightness(1.05); }
      .btn:disabled { opacity: 0.6; cursor: not-allowed; }
      .btn.secondary { background: #fff; color: #0f172a; border-color: rgba(15,23,42,0.12); }
      .toggle { display: flex; align-items: center; gap: 8px; font-size: 12px; color: rgba(15, 23, 42, 0.75); }
      .muted { color: rgba(15, 23, 42, 0.6); font-size: 12px; }
      .error { padding: 10px 12px; border-radius: 12px; border: 1px solid var(--danger-border); background: var(--danger-bg); margin-bottom: 12px; }
      pre { overflow: auto; padding: 12px; border-radius: 12px; background: rgba(15, 23, 42, 0.04); border: 1px solid rgba(15, 23, 42, 0.06); }

      .toolbar { display: flex; align-items: center; gap: 10px; justify-content: space-between; margin-bottom: 12px; }
      .toolbar-left { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
      .toolbar-right { display: flex; align-items: center; gap: 10px; }
      .pill { display: inline-flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 12px; border: 1px solid rgba(15, 23, 42, 0.12); background: #fff; }
      .pill select, .pill input { border: none; padding: 0; border-radius: 0; height: 20px; }
      .pill select { background: transparent; }
      .preview :global(h1) { font-size: 22px; }
      .preview :global(h2) { font-size: 18px; }
      .preview :global(p) { line-height: 1.6; }
      .preview :global(code) { background: rgba(15, 23, 42, 0.06); padding: 2px 6px; border-radius: 8px; }
      .preview :global(pre code) { background: transparent; padding: 0; }
      @media (max-width: 960px) {
        .shell { grid-template-columns: 1fr; }
        aside { position: sticky; top: 0; z-index: 20; }
        header { padding: 14px 16px; }
        main { padding: 0 16px 16px; }
        .grid { grid-template-columns: 1fr; }
        .row { grid-template-columns: 1fr; }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <aside>
        <div class="brand">
          <div class="brand-badge">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2l8 4.5v11L12 22l-8-4.5v-11L12 2Z" stroke="currentColor" stroke-width="2"/></svg>
          </div>
          <div>
            <div class="brand-title">Polyglot AI</div>
            <div class="brand-sub">Studio & API</div>
          </div>
        </div>

        <nav>
          {nav.map((item) => (
            <a class={`nav-item ${path === item.href ? 'active' : ''}`} href={item.href}>
              <span class="nav-icon" set:html={iconSvg(item.icon)} />
              <span>{item.label}</span>
            </a>
          ))}
        </nav>

        <div class="footer">
          <a href="/settings">
            <span class="nav-icon" set:html={iconSvg('settings')} />
            <span>Settings</span>
          </a>
        </div>
      </aside>

      <div>
        <header>
          <div class="page-title">{Astro.props.pageTitle ?? 'Neural Text Translation'}</div>
          <div class="status">System Online</div>
        </header>

        <main>
          <slot />
        </main>
      </div>
    </div>
  </body>
</html>
